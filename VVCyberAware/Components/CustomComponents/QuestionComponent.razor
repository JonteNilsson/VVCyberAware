@using VVCyberAware.Shared.Models.ApiModels
<div class="question-box">
    <form>
        <p class="font-weight-bold">@Question.QuestionText</p>

        @for (int i = 0; i < Question.Answers.Count(); i++)
        {
            var answer = Question.Answers.ElementAt(i);

            <input class="form-check-input" type="radio"
                   id="@($"QuestionRadio_{Question.Id}_{i}")"
                   name="@($"QuestionRadio_{Question.Id}")"
                   value="@answer.Key"
                   @onchange="(e) => HandleRadioValueChanged(answer.Key)">
            <label class="form-check-label" for="@($"QuestionRadio_{Question.Id}_{i}")">
                @answer.Key
            </label>
        }
    </form>
</div>

@code {
    [Parameter]
    public QuestionApiModel Question { get; set; }

    [Parameter]
    public EventCallback<(int, string)> OnAnswerSelected { get; set; }

    private async Task HandleRadioValueChanged(string selectedAnswer)
    {
        await OnAnswerSelected.InvokeAsync((Question.Id, selectedAnswer));
    }
}